# å‡†å¤‡å’Œå¼€å§‹æ¸¸æˆåŠŸèƒ½ - æµ‹è¯•è¯´æ˜

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. ç©å®¶å‡†å¤‡åŠŸèƒ½
- éæˆ¿ä¸»ç©å®¶å¯ä»¥åˆ‡æ¢å‡†å¤‡çŠ¶æ€
- å‡†å¤‡çŠ¶æ€å®æ—¶åŒæ­¥åˆ°æ‰€æœ‰ç©å®¶
- ç©å®¶åˆ—è¡¨æ˜¾ç¤ºå‡†å¤‡çŠ¶æ€ï¼ˆå·²å‡†å¤‡/æœªå‡†å¤‡ï¼‰

### 2. å¼€å§‹æ¸¸æˆåŠŸèƒ½
- æˆ¿ä¸»å¯ä»¥åœ¨æ»¡è¶³æ¡ä»¶æ—¶å¼€å§‹æ¸¸æˆ
- è‡ªåŠ¨éªŒè¯ç©å®¶æ•°é‡å’Œå‡†å¤‡çŠ¶æ€
- æ¸¸æˆçŠ¶æ€æ›´æ–°ä¸º "playing"

## ğŸ“Š æ•°æ®åº“è¡¨ - æ— éœ€æ›´æ–°

ç°æœ‰çš„æ•°æ®åº“è¡¨ç»“æ„**å®Œå…¨æ»¡è¶³éœ€æ±‚**ï¼Œä¸éœ€è¦ä»»ä½•ä¿®æ”¹ï¼š

- `players` è¡¨çš„ `player_state` jsonb å­—æ®µå­˜å‚¨ `isReady` çŠ¶æ€
- `games` è¡¨çš„ `status` å­—æ®µå­˜å‚¨æ¸¸æˆçŠ¶æ€ï¼ˆwaiting/playing/finishedï¼‰
- `games` è¡¨çš„ `game_state` jsonb å­—æ®µå­˜å‚¨æ¸¸æˆå¼€å§‹æ—¶é—´ç­‰ä¿¡æ¯

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æ­¥éª¤ 1ï¼šåˆ›å»ºæˆ¿é—´
1. æ‰“å¼€æµè§ˆå™¨çª—å£ A
2. è¾“å…¥æ˜µç§°ï¼ˆä¾‹å¦‚ï¼š"ç©å®¶1"ï¼‰
3. ç‚¹å‡»"åˆ›å»ºæˆ¿é—´"
4. è®°ä¸‹æˆ¿é—´å·

**é¢„æœŸç»“æœ**ï¼š
- æˆåŠŸè¿›å…¥æ¸¸æˆæˆ¿é—´
- ä½ æ˜¯æˆ¿ä¸»ï¼Œæ˜¾ç¤º"æˆ¿ä¸»"æ ‡ç­¾
- ç©å®¶åˆ—è¡¨æ˜¾ç¤º"æˆ¿ä¸»"çŠ¶æ€
- ä¸­é—´åŒºåŸŸæ˜¾ç¤º"ç­‰å¾…ç©å®¶åŠ å…¥ (1/2)"

### æ­¥éª¤ 2ï¼šåŠ å…¥æˆ¿é—´
1. æ‰“å¼€æµè§ˆå™¨çª—å£ Bï¼ˆéšèº«æ¨¡å¼æˆ–å…¶ä»–æµè§ˆå™¨ï¼‰
2. è¾“å…¥æ˜µç§°ï¼ˆä¾‹å¦‚ï¼š"ç©å®¶2"ï¼‰
3. è¾“å…¥æ­¥éª¤1çš„æˆ¿é—´å·
4. ç‚¹å‡»"åŠ å…¥æˆ¿é—´"

**é¢„æœŸç»“æœ**ï¼š
- æˆåŠŸè¿›å…¥æ¸¸æˆæˆ¿é—´
- ç©å®¶åˆ—è¡¨æ˜¾ç¤º"æœªå‡†å¤‡"çŠ¶æ€
- ä¸­é—´åŒºåŸŸæœ‰"å‡†å¤‡"æŒ‰é’®
- çª—å£ A çš„ç©å®¶åˆ—è¡¨è‡ªåŠ¨æ›´æ–°ï¼Œæ˜¾ç¤ºç©å®¶2

### æ­¥éª¤ 3ï¼šç©å®¶å‡†å¤‡
åœ¨çª—å£ Bï¼ˆç©å®¶2ï¼‰ï¼š
1. ç‚¹å‡»"å‡†å¤‡"æŒ‰é’®

**é¢„æœŸç»“æœ**ï¼š
- æŒ‰é’®æ–‡å­—å˜ä¸º"å–æ¶ˆå‡†å¤‡"
- æŒ‰é’®å˜ä¸ºç»¿è‰²
- ç©å®¶åˆ—è¡¨ä¸­ç©å®¶2çš„çŠ¶æ€å˜ä¸º"å·²å‡†å¤‡"
- çª—å£ A åŒæ­¥æ›´æ–°ï¼Œæ˜¾ç¤º"1/1 ä½ç©å®¶å·²å‡†å¤‡"

### æ­¥éª¤ 4ï¼šå–æ¶ˆå‡†å¤‡ï¼ˆå¯é€‰æµ‹è¯•ï¼‰
åœ¨çª—å£ Bï¼š
1. å†æ¬¡ç‚¹å‡»"å–æ¶ˆå‡†å¤‡"æŒ‰é’®

**é¢„æœŸç»“æœ**ï¼š
- æŒ‰é’®æ¢å¤ä¸º"å‡†å¤‡"
- çŠ¶æ€å˜å›"æœªå‡†å¤‡"
- ä¸¤ä¸ªçª—å£éƒ½åŒæ­¥æ›´æ–°

### æ­¥éª¤ 5ï¼šå¼€å§‹æ¸¸æˆå¤±è´¥ï¼ˆéªŒè¯é€»è¾‘ï¼‰
åœ¨çª—å£ Aï¼ˆæˆ¿ä¸»ï¼‰ï¼Œç©å®¶2æœªå‡†å¤‡æ—¶ï¼š
1. å°è¯•ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"æŒ‰é’®

**é¢„æœŸç»“æœ**ï¼š
- æŒ‰é’®æ˜¯ç¦ç”¨çŠ¶æ€ï¼ˆç°è‰²ï¼Œæ— æ³•ç‚¹å‡»ï¼‰
- æç¤ºæ˜¾ç¤º"0/1 ä½ç©å®¶å·²å‡†å¤‡"

### æ­¥éª¤ 6ï¼šå¼€å§‹æ¸¸æˆæˆåŠŸ
1. åœ¨çª—å£ Bï¼Œç‚¹å‡»"å‡†å¤‡"
2. åœ¨çª—å£ Aï¼Œç‚¹å‡»"å¼€å§‹æ¸¸æˆ"

**é¢„æœŸç»“æœ**ï¼š
- æŒ‰é’®æ˜¾ç¤º"å¼€å§‹ä¸­..."
- æ¸¸æˆçŠ¶æ€å˜ä¸º "playing"
- ä¸¤ä¸ªçª—å£éƒ½æ˜¾ç¤º"æ¸¸æˆè¿›è¡Œä¸­"
- æ˜¾ç¤º"æ¸¸æˆå·²æˆåŠŸå¼€å§‹ï¼"
- æ˜¾ç¤ºå¼€å§‹æ—¶é—´

### æ­¥éª¤ 7ï¼šå¤šäººæµ‹è¯•ï¼ˆ3-4äººï¼‰
1. æ‰“å¼€æ›´å¤šæµè§ˆå™¨çª—å£ï¼ˆCã€Dï¼‰
2. åŠ å…¥åŒä¸€ä¸ªæˆ¿é—´
3. æ‰€æœ‰éæˆ¿ä¸»ç©å®¶éƒ½ç‚¹å‡»"å‡†å¤‡"
4. æˆ¿ä¸»ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"

**é¢„æœŸç»“æœ**ï¼š
- æ‰€æœ‰ç©å®¶éƒ½èƒ½çœ‹åˆ°å‡†å¤‡çŠ¶æ€
- æˆ¿ä¸»æ˜¾ç¤º"3/3 ä½ç©å®¶å·²å‡†å¤‡"ï¼ˆæˆ–ç›¸åº”æ•°é‡ï¼‰
- æ¸¸æˆæˆåŠŸå¼€å§‹

## âœ… éªŒè¯å¼€å§‹æ¸¸æˆæ˜¯å¦æˆåŠŸ

### æ–¹æ³• 1ï¼šUI ç•Œé¢éªŒè¯
æ¸¸æˆæˆåŠŸå¼€å§‹åï¼Œç•Œé¢ä¼šæ˜¾ç¤ºï¼š
```
æ¸¸æˆè¿›è¡Œä¸­
æ¸¸æˆå·²æˆåŠŸå¼€å§‹ï¼
å¼€å§‹æ—¶é—´: 14:35:22
```

### æ–¹æ³• 2ï¼šSupabase æ•°æ®åº“éªŒè¯
1. æ‰“å¼€ Supabase Dashboard
2. è¿›å…¥ Table Editor
3. æŸ¥çœ‹ `games` è¡¨
4. æ‰¾åˆ°ä½ çš„æ¸¸æˆè®°å½•
5. æ£€æŸ¥ä»¥ä¸‹å­—æ®µï¼š
   - `status` = 'playing' âœ…
   - `game_state` åŒ…å« `started_at` æ—¶é—´æˆ³ âœ…

### æ–¹æ³• 3ï¼šæµè§ˆå™¨æ§åˆ¶å°éªŒè¯
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰ï¼š
1. æŸ¥çœ‹ Console é¢æ¿
2. åº”è¯¥æ²¡æœ‰æŠ¥é”™
3. å¯ä»¥çœ‹åˆ° Supabase Realtime çš„æ›´æ–°æ¶ˆæ¯

## ğŸ¯ åŠŸèƒ½ç‰¹ç‚¹

### å‡†å¤‡ç³»ç»Ÿ
- âœ… åªæœ‰éæˆ¿ä¸»ç©å®¶éœ€è¦å‡†å¤‡
- âœ… æˆ¿ä¸»é»˜è®¤è§†ä¸ºå·²å‡†å¤‡
- âœ… å‡†å¤‡çŠ¶æ€å®æ—¶åŒæ­¥
- âœ… å¯ä»¥åˆ‡æ¢å‡†å¤‡/å–æ¶ˆå‡†å¤‡

### å¼€å§‹æ¸¸æˆéªŒè¯
- âœ… éªŒè¯æ˜¯å¦ä¸ºæˆ¿ä¸»
- âœ… éªŒè¯æœ€å°‘ç©å®¶æ•°é‡ï¼ˆ2äººï¼‰
- âœ… éªŒè¯æ‰€æœ‰éæˆ¿ä¸»ç©å®¶å·²å‡†å¤‡
- âœ… é”™è¯¯æç¤ºæ¸…æ™°

### UI åé¦ˆ
- âœ… å‡†å¤‡æŒ‰é’®çŠ¶æ€å˜åŒ–ï¼ˆè“è‰²â†’ç»¿è‰²ï¼‰
- âœ… ç©å®¶åˆ—è¡¨çŠ¶æ€æ ‡ç­¾
- âœ… å®æ—¶å‡†å¤‡äººæ•°ç»Ÿè®¡
- âœ… æŒ‰é’®ç¦ç”¨çŠ¶æ€
- âœ… åŠ è½½çŠ¶æ€æ˜¾ç¤º
- âœ… é”™è¯¯æç¤ºè‡ªåŠ¨æ¶ˆå¤±ï¼ˆ3ç§’ï¼‰

## ğŸ› å¸¸è§é—®é¢˜

### Q: ç‚¹å‡»"å‡†å¤‡"æŒ‰é’®æ²¡ååº”
A: æ£€æŸ¥ï¼š
- æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
- æ˜¯å¦ä¸ºæˆ¿ä¸»ï¼ˆæˆ¿ä¸»æ²¡æœ‰å‡†å¤‡æŒ‰é’®ï¼‰
- ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

### Q: "å¼€å§‹æ¸¸æˆ"æŒ‰é’®ä¸€ç›´ç¦ç”¨
A: æ£€æŸ¥ï¼š
- æ˜¯å¦æ‰€æœ‰éæˆ¿ä¸»ç©å®¶éƒ½å·²å‡†å¤‡
- ç©å®¶æ•°é‡æ˜¯å¦ >= 2
- åˆ·æ–°é¡µé¢é‡è¯•

### Q: æ¸¸æˆçŠ¶æ€ä¸åŒæ­¥
A: æ£€æŸ¥ï¼š
- Supabase Realtime æ˜¯å¦å¯ç”¨
- å¤šä¸ªçª—å£æ˜¯å¦åœ¨åŒä¸€ä¸ªæˆ¿é—´
- åˆ·æ–°é¡µé¢é‡æ–°åŠ å…¥

## ğŸ“ æŠ€æœ¯å®ç°

### Store æ–°å¢æ–¹æ³•
```javascript
toggleReady()  // åˆ‡æ¢å‡†å¤‡çŠ¶æ€
startGame()    // å¼€å§‹æ¸¸æˆ
```

### æ•°æ®å­˜å‚¨
```javascript
// player_state ç»“æ„
{
  isHost: true/false,
  isReady: true/false  // æ–°å¢å­—æ®µ
}

// game_state ç»“æ„
{
  started_at: "2026-02-06T...",  // æ–°å¢å­—æ®µ
  current_turn: 0
}
```

## ğŸ® ä¸‹ä¸€æ­¥åŠŸèƒ½

å‡†å¤‡å’Œå¼€å§‹æ¸¸æˆåŠŸèƒ½å·²å®Œæˆï¼Œå¯ä»¥ç»§ç»­å¼€å‘ï¼š
1. å‘ç‰ŒåŠŸèƒ½
2. å‡ºç‰ŒåŠŸèƒ½
3. å›åˆç³»ç»Ÿ
4. æ¸¸æˆè§„åˆ™åˆ¤å®š
5. ç»“ç®—åŠŸèƒ½

---

**æ‰€æœ‰åŠŸèƒ½å·²å®Œæˆå¹¶å¯æ­£å¸¸ä½¿ç”¨ï¼** ğŸ‰
